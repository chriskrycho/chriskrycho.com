<!DOCTYPE html>
<html lang="en">
<head>
    <title>Ember.js and TypeScript in Early 2017 &middot; Chris Krycho</title>
    <meta name="description" content="A few weeks ago at EmberConf 2017, Tom Dale and Yehuda Katz announced Glimmer.js, a lightweight UI component library… and they noted that it was written in and had full support right out of the gate for TypeScript. A fair number of people have had questions about this, but …"/>

    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1.0"/>

<link rel='me' href='https://alpha.app.net/chriskrycho' data-type='follow' data-user-id='@chriskrycho'/>    <meta property="og:url" content="http://www.chriskrycho.com/drafts/emberjs-and-typescript-in-early-2017.html"/>
    <meta property="og:title" content="Ember.js and TypeScript in Early 2017"/>
    <meta property="og:description" content="A few weeks ago at EmberConf 2017, Tom Dale and Yehuda Katz announced Glimmer.js, a lightweight UI component library… and they noted that it was written in and had full support right out of the gate for TypeScript. A fair number of people have had questions about this, but …"/>
        <meta property="og:image" content="http://www.chriskrycho.com//assets/images/ck.png"/>
<link rel="author" href=""/>
<link rel="me" href=""/><meta name="twitter:card" content="summary"/>
<meta name="twitter:site" content="@chriskrycho"/>
<meta name="twitter:creator" content="@chriskrycho"/>
    <meta name="twitter:title" content="Ember.js and TypeScript in Early 2017"/>
    <meta name="twitter:description" content="A few weeks ago at EmberConf 2017, Tom Dale and Yehuda Katz announced Glimmer.js, a lightweight UI component library… and they noted that it was written in and had full support right out of the gate for TypeScript. A fair number of people have had questions about this, but …"/>
        <meta name="twitter:image" content="http://www.chriskrycho.com/assets/images/ck.png"/>
    <link rel="me" href="http://stackoverflow.com/users/564181/chris-krycho"/>
    <link rel="me" href="https://github.com/chriskrycho"/>
    <link rel="me" href="https://patreon.com/chriskrycho"/>
    <link rel="me" href="https://soundcloud.com/chriskrycho"/>
    <link rel="me" href="https://vimeo.com/chriskrycho"/>
    <link rel="me" href="https://cash.me/$chriskrycho"/>
    <link rel="me" href="https://twitter.com/chriskrycho"/>
    <link rel="me" href="mailto:chris at chriskrycho dot com"/>
    <link rel="me" href="http://www.linkedin.com/in/chriskrycho"/>

    <link rel="openid.delegate" href="http://www.chriskrycho.com/" />
    <link rel="openid.server" href="https://indieauth.com/openid" />

    <link rel="stylesheet" type="text/css" href="/assets/style.css"/>
    <link rel="stylesheet" type="text/css" href="/assets/fonts.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel='stylesheet' href='//cdn.jsdelivr.net/font-hack/2.020/css/hack.min.css'>

    <link href="/favicon.png" type="image/png" rel="icon" />
    <link href="/favicon.ico" type="image/ico" rel="icon" />

    <script type="text/javascript" src="/assets/js/mtiFontTrackingCode.js"></script>


    <link rel="alternate" href="/feed.xml" type="application/rss+xml" title="All posts">
        <link rel="alternate" href="/feeds/Art.xml" type="application/rss+xml" title="Posts filed in in 'Art''">
        <link rel="alternate" href="/feeds/blog.xml" type="application/rss+xml" title="Posts filed in in 'Blog''">
        <link rel="alternate" href="/feeds/Tech.xml" type="application/rss+xml" title="Posts filed in in 'Tech''">
        <link rel="alternate" href="/feeds/Theology.xml" type="application/rss+xml" title="Posts filed in in 'Theology''">
</head>
<body>
    <header id="site-header">
        <div class="hgroup">
            <h1 id="site-title">
<a href="http://www.chriskrycho.com"><img class="logotype" src="/assets/images/ck.png" alt="ck"/>Chris Krycho</a>
</h1>

            <h2 id="site-subtitle">Theology, technology, life & art</h2>
        </div>

        <nav>
            <ul>
                <li class="section-title art"><a href="http://www.chriskrycho.com/art/">Art</a></li>
                <li class="section-title blog"><a href="http://www.chriskrycho.com/blog/">blog</a></li>
                <li class="section-title tech"><a href="http://www.chriskrycho.com/tech/">Tech</a></li>
                <li class="section-title theology"><a href="http://www.chriskrycho.com/theology/">Theology</a></li>
                <li class="section-title divider" role="presentation"></li>
                <li class="section-title"><a href="http://www.chriskrycho.com/series.html">Series</a></li>
                <li class="section-title divider" role="presentation"></li>
                <li class="section-title"><a href="http://www.chriskrycho.com/about">About</a></li>
                <li class="section-title"><a href="http://www.chriskrycho.com/cv">C.V.</a></li>
                <li class="section-title"><a href="http://www.chriskrycho.com/now">Now</a></li>
            </ul>
        </nav>

    </header>


<article class="emberjs typescript software-development tech">

    <header>
<h1>Ember.js and TypeScript in Early 2017</h1>
<h2>It’s not awesome yet… but it is getting there.</h2>    </header>

    <div class="meta">
<span class="date"><a href="http://www.chriskrycho.com/drafts/emberjs-and-typescript-in-early-2017.html" title="Ember.js and TypeScript in Early 2017"><i class="fa fa-fw fa-link"></i></a>April 11, 2017</span><span class="section">Filed under <a class="section-title" href="http://www.chriskrycho.com/tech/">Tech</a></span><span class="hashtag"><a class="hashtags" href="http://www.chriskrycho.com/emberjs/">#emberjs</a><a class="hashtags" href="http://www.chriskrycho.com/software-development/">#software development</a><a class="hashtags" href="http://www.chriskrycho.com/typescript/">#typescript</a></span><span><a href="http://www.chriskrycho.com/2017/emberjs-and-typescript-in-early-2017.txt">Markdown source</a></span>    </div>

    <div class="content-wrapper">


        <div class="content">

<p>A few weeks ago at EmberConf 2017, Tom Dale and Yehuda Katz announced <a href="https://glimmerjs.com">Glimmer.js</a>, a lightweight UI component library… and they noted that it was written in and had full support right out of the gate for <a href="http://www.typescriptlang.org">TypeScript</a>. A fair number of people have <a href="https://medium.com/@tomdale/glimmer-js-whats-the-deal-with-typescript-f666d1a3aad0">had questions</a> about this, but there’s also been consistent interest in using TypeScript with Ember in the community. And, as readers of this blog know, I’m <em>kind of</em> obsessed with finding ways to make type systems help me <a href="http://www.chriskrycho.com/2016/the-itch.html">express invariants</a> and <a href="http://www.chriskrycho.com/2016/keyof-and-mapped-types-in-typescript-21.html">solve real problems</a>.</p>
<p>Although I haven’t talked about it expressly before, I’ve been making heavy use of TypeScript in our Ember.js app at Olo (after a period of experimentation with <a href="https://flowtype.org">Flow</a>. My experiments have been on the <em>relatively</em> early end of the adoption curve for Ember.js and TypeScript. It hasn’t always been smooth sailing. But it’s been valuable nonetheless: we’ve seen many of the same kinds of <a href="https://slack.engineering/typescript-at-slack-a81307fa288d">productivity wins as Slack</a> has had with it—even <em>with</em> those limitations and hiccups.</p>
<p>Given that (and some persistent pestering from one Ember.js core team member—you know who you are), I thought it might be useful to write up a sort of <strong>State of the Ember.ts</strong>. I’m going to explain how it works, then cover the bad bits up front, and then end on the good stuff. But you should know that even with the bad bits, I’m <em>extremely</em> happy with the results I’ve had converting existing modules and especially with writing new modules in TypeScript.</p>
<section id="section" class="level2">
<h2></h2>
</section>
<section id="the-bad" class="level2">
<h2>The Bad</h2>
<p>Let’s get this right out of the way up front: there are a couple things which simply don’t work with TypeScript and Ember today.</p>
<ol type="1">
<li><p>Add-ons currently can’t use <code>ember-cli-typescript</code>, and no one has had the bandwidth to chase it down. It’s a pretty high priority: I know some core team members have their eyes on it, because it’s important for integrating Glimmer.js and Ember.js easily. But as of today, if you’re trying to write add-ons, you’re out of luck doing it that way, which means it’s a <em>lot</em> more work, if it’s possible at all.</p></li>
<li><p>The <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/ember">typings</a> story is… weak. <a href="https://github.com/winding-lines">@winding-lines</a> did a bang-up job getting them in a reasonable state a few months ago, but he’s been busy, and so have I and everyone else who’s had the motivation to work on it. They’re much, much better than nothing: you still get pretty decent completion of the core Ember functionality. But it doesn’t <em>yet</em> take advantage of all the features Microsoft has shipped in the TypeScript 2.x series which make it possible to actually represent Ember’s custom object model with type checking and get the smart completion benefits (“Intellisense”). So it’s not great, but it’s not <em>horrible</em>, by a long shot. It can just stand to improve.</p>
<p>The net of this is that when you’re in the definition of any <code>Ember.Object</code> descendant—i.e. anything that extends <code>Ember.Object</code>, including <code>Ember.Controller</code>, <code>Ember.Component</code>, <code>Ember.Mixin</code>, <code>Ember.Route</code>, and also <code>DS.Model</code> and so on—you don’t yet get either completion or type checking for the items attached to the item in question. When you do <code>this.get('foo')</code>, you get back an <code>any</code> type: TypeScript has the ability to know that <code>Ember.get</code> should handle keys and the associated types on them, but that ability isn’t being taken advantage of yet.</p></li>
<li><p>Along with that, Ember doesn’t yet have the ability to use ES6 classes, so a lot of the kinds of type constraints it’s <em>nice</em> to do—specifically, defining that a given property of an object is of a specific type—is incredibly verbose. You end up writing things like this:</p>
<pre class="ts"><code>const { foo, bar }: { foo: string, bar: boolean } =
  getProperties(this, &#39;foo&#39;, &#39;bar&#39;);</code></pre>
<p>As you can imagine, extending that same practice out for a <code>Component</code> definition is simply untenable (and, importantly, the order is backwards from what’s actually useful when reading a file!):</p>
<pre class="ts"><code>export default Ember.Component.extend({
  foo: &#39;whatever&#39;,
  bar: false,
}: {
  foo: string,
  bar: boolean,
});</code></pre>
<p>I’ll talk about the pragmatics of what we are and aren’t doing with TS in our Ember codebase more below, but those limitations are all there for now and they do stymie me at times. They’ll go away once better typings land. Which they will (see below under <strong>The Good</strong>)—but they’re not here yet.</p></li>
</ol>
<p>The overarching theme here is: we currently don’t have an <em>owner</em> for the TypeScript integration, and that means that stuff stagnates because all of us who are interested have things which push it down our priority list… fairly permanently. (I’d like to be that guy, but work constraints haven’t allowed for it, at least not yet.)</p>
</section>
<section id="the-good" class="level2">
<h2>The Good</h2>
<ol type="1">
<li><a href="https://www.youtube.com/watch?v=951HiqnNQ1w">Better typings are coming.</a> :tada: That’s TypeScript Program Manager Daniel Rosenwasser at EmberConf talking about the stuff he’s working on with the Ember team to make the typings awesome.</li>
<li>Even with the relatively weak typings right now, {&gt;&gt; TODO &lt;&lt;}</li>
</ol>
</section>
<section id="using-it" class="level2">
<h2>Using it</h2>
<p>At the most basic level, integrating TypeScript into your Ember app is as simple as doing two things:</p>
<ol type="1">
<li>Run <code>ember install ember-cli-typescript</code>.</li>
<li>Start converting existing modules or writing new modules as TypeScript.</li>
<li>Go wild!</li>
</ol>
<p>In practice, because of the aforementioned limitations, (3) is more like “Go use it eagerly but only in certain parts of the app.” The places where we currently get the <em>most</em> mileage out of tests are <em>tests</em> and <em>business logic</em>. I have several fairly complex places where I do transformations from one state to another, and those are all encoded in functions written in TypeScript—and, importantly, those are <em>not</em> members of a component. They’re just standalone functions.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> That has the delightful effect of making them amenable to use with TypeScript. It also makes them much easier to test.</p>
<p>I also do make fairly extensive use of TypeScript when defining the return type of a computed property:</p>
<pre class="ts"><code>export default Ember.Component.extend({
  someOtherThing: false,
  someThing: Ember.computed(&#39;someOtherThing&#39;, function(): string {
    const someOtherThing = Ember.get(this, &#39;someOtherThing&#39;);
    return `someOtherThing was ${someOtherThing}`;
  }),
});</code></pre>
<p>That gets me a small but already valuable check that I’m returning what I think I’m returning. (Unfortunately, we can’t yet use decorated functions via the oh-so-awesome <a href="https://github.com/rwjblue/ember-computed-decorators">ember-computed-decorators</a> with these because the decorator syntax used there isn’t in line with the version of the decorator spec TypeScript currently enforces. Someday!)</p>
</section>
<section class="footnotes" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p><a href="http://www.chriskrycho.com/2016/what-is-functional-programming.html#pure-functions">Pure functions</a>, to be specific, because my goal is to write as <em>many</em> of my functions as pure functions as possible.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩</a></p></li>
</ol>
</section>
        </div>
    </div>
</article>


    <footer id="site-footer"><section id="connect">
    <h2>Connect</h2>
    <ul class="icons">
        <li><a href="mailto:chris at chriskrycho dot com"><i class="fa fa-fw fa-envelope"></i>Email</a></li>
        <li><a href="https://github.com/chriskrycho"><i class="fa fa-fw fa-github"></i>GitHub</a></li>
        <li><a href="https://twitter.com/chriskrycho"><i class="fa fa-fw fa-twitter"></i>Twitter</a></li>
        <li><a href="https://soundcloud.com/chriskrycho"><i class="fa fa-fw fa-soundcloud"></i>SoundCloud</a></li>
        <li><a href="http://www.linkedin.com/in/chriskrycho"><i class="fa fa-fw fa-linkedin"></i>LinkedIn</a></li>
        <li><a href="https://vimeo.com/chriskrycho"><i class="fa fa-fw fa-vimeo"></i>Vimeo</a></li>
        <li><a href="http://stackoverflow.com/users/564181/chris-krycho"><i class="fa fa-fw fa-stack-overflow"></i>Stack Overflow</a></li>
    </ul>
    <h3>Support Me</h3>
    <ul class='icons'>
        <li><a href="https://patreon.com/chriskrycho"><i class='fa fa-fw fa-money'></i>Patreon</a></li>
        <li><a href="https://cash.me/$chriskrycho"><i class='fa fa-fw fa-usd'></i>Cash.me</a></li>
    </ul>
</section>
<section id="subscribe">
    <h2>Subscribe</h2>
    <ul class="icons">
        <li class="section-title">
            <a onclick="window.open('http://eepurl.com/GzswP', 'subscribe', 'width=608,height=608')">
                   <i class="fa fa-fw fa-envelope"></i>Email
            </a>
        </li>
    </ul>
    <h3>Feeds</h3>
    <ul class="icons">
        <li class="section-title">
            <a href="http://www.chriskrycho.com/feed.xml"><i class="fa fa-fw fa-rss"></i>Everything</a>
        </li>
        <li class="section-title">
            <a href="http://www.chriskrycho.com/feeds/Art.xml"><i class="fa fa-fw fa-rss"></i>Art</a>
        </li>
        <li class="section-title">
            <a href="http://www.chriskrycho.com/feeds/blog.xml"><i class="fa fa-fw fa-rss"></i>blog</a>
        </li>
        <li class="section-title">
            <a href="http://www.chriskrycho.com/feeds/Tech.xml"><i class="fa fa-fw fa-rss"></i>Tech</a>
        </li>
        <li class="section-title">
            <a href="http://www.chriskrycho.com/feeds/Theology.xml"><i class="fa fa-fw fa-rss"></i>Theology</a>
        </li>
    </ul>
</section>
<section id="recent">
    <h2>Recent</h2>
    <ul>
        <li>Art: <a href="http://www.chriskrycho.com/2019/time-does-not-heal.html">Time Does Not Heal</a></li>
        <li>Blog: <a href="http://www.chriskrycho.com/2019/being-an-amateur-again.html">Being an Amateur Again</a></li>
        <li>Tech: <a href="http://www.chriskrycho.com/2019/emberconf-2019-typed-ember-team-report.html">EmberConf 2019 Typed Ember Team Report</a></li>
        <li>Theology: <a href="http://www.chriskrycho.com/2019/heresies.html">Heresies</a></li>
    </ul>
</section></footer>

    <script type="text/javascript">
    var MTIProjectId='a34d2e31-99b5-469a-9b81-128fc0bd9745';
    </script>

<link rel="stylesheet" href="/assets/tomorrow.min.css">
<script src="/assets/js/highlight.pack.js"></script>
<script type="text/javascript">
// Get all the <pre><code> elements, and use the <pre> element to set the <code>
// element's class so hljs will use it rather than trying to figure it out.
var preEls = document.getElementsByTagName('pre');
for (var e in preEls) {
    var pre = preEls[e];
    if (pre.firstChild && pre.firstChild.tagName === 'CODE') {
        var code = pre.firstChild;
        code.className = pre.className;
    }
}

// Then run hljs.
hljs.initHighlightingOnLoad();
</script>

<script type="text/javascript" src="/assets/js/lib.js"></script>
</body>
</html>